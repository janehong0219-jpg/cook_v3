<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å‹›å‹›ä¸Šèœ é™ªä½ ç”¨å¿ƒéç”Ÿæ´»</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        [v-cloak] { display: none; }
        body { background-color: #fdfbf7; font-family: 'Noto Sans TC', sans-serif; color: #44403c; -webkit-tap-highlight-color: transparent; scroll-behavior: smooth; }
        .app-shell { width: 100%; max-width: 1200px; margin: 0 auto; min-height: 100vh; background: #fdfbf7; position: relative; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .tab-btn { padding: 8px 0; margin-right: 24px; color: #a8a29e; font-weight: 500; transition: all 0.3s; position: relative; white-space: nowrap; }
        .tab-btn.active { color: #1c1917; font-weight: 700; font-size: 1.1em; }
        .tab-btn.active::after { content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; background: #ea580c; border-radius: 50%; }
        .chip { transition: all 0.2s; white-space: nowrap; }
        .chip.active { background: #1c1917 !important; color: white !important; border-color: #1c1917 !important; box-shadow: 0 4px 12px rgba(0,0,0,0.15); transform: translateY(-1px); }
        .recipe-card { background: white; border-radius: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.03); transition: all 0.3s; height: 100%; display: flex; flex-direction: column; scroll-mt: 160px; }
        @media (min-width: 768px) { .recipe-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.08); } }
        .animate-fade-up { animation: fadeInUp 0.5s ease-out forwards; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .gf-box { background: #fff1f2; border-left: 4px solid #f43f5e; color: #9f1239; }
        .gf-box.warm-mode { background: #fff7ed; border-left-color: #f97316; color: #9a3412; }
        .secret-heart { animation: heartbeat 1.5s infinite; cursor: pointer; position: absolute; top: 12px; right: 12px; color: #f43f5e; font-size: 1.2rem; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1)); }
        @keyframes heartbeat { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
        .chef-note { background: #f5f5f4; border-radius: 16px; padding: 16px; margin-top: auto; }
        .chef-input { width: 100%; background: white; border: 1px solid #e7e5e4; border-radius: 8px; padding: 10px; font-size: 14px; margin-top: 8px; outline: none; transition: border 0.3s; resize: none; }
        .sidebar-menu { width: 280px; max-width: 85vw; }
        .login-overlay, .info-modal-overlay { backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); z-index: 1000; }
        .favorite-btn { position: absolute; top: 16px; left: 16px; z-index: 10; background: rgba(255,255,255,0.8); backdrop-filter: blur(4px); width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #a8a29e; transition: all 0.3s; }
        .favorite-btn.is-fav { color: #f43f5e; background: white; }

        /* å…§å®¹æ¨£å¼å„ªåŒ– */
        .info-content h2 { font-size: 20px; font-weight: 700; color: #1c1917; margin-bottom: 16px; border-left: 4px solid #ea580c; padding-left: 12px; }
        .info-content h3 { font-size: 16px; font-weight: 700; color: #44403c; margin-top: 24px; margin-bottom: 10px; }
        .info-content p { font-size: 14px; color: #57534e; line-height: 1.8; margin-bottom: 12px; text-align: justify; }
        .info-quote { background: #fdfbf7; padding: 16px; border-radius: 12px; font-style: italic; color: #78716c; margin: 16px 0; font-size: 13px; border: 1px solid #f5f5f4; line-height: 1.6; }
        .info-list li { font-size: 14px; color: #57534e; margin-bottom: 10px; padding-left: 20px; position: relative; list-style: none; }
        .info-list li::before { content: 'â€¢'; color: #ea580c; position: absolute; left: 0; font-weight: bold; }
        .suggest-box { background: #fff7ed; border: 2px dashed #fed7aa; border-radius: 20px; padding: 24px; }
    </style>
</head>
<body>

<div id="app" v-cloak>
    
    <div v-if="showLoginModal" class="login-overlay fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60">
        <div :class="['login-box bg-white w-full max-w-[320px] p-8 rounded-[32px] shadow-2xl text-center', isShake ? 'shake' : '']">
            <div class="mb-6"><div class="w-16 h-16 bg-stone-100 rounded-full mx-auto mb-4 flex items-center justify-center text-2xl">ğŸ”’</div><h2 class="text-xl font-bold text-stone-800">è«‹å…ˆç™»å…¥</h2><p class="text-xs text-stone-400 mt-1">å°ˆå±¬æ–¼å¼µå»ºç¯‰å¸«çš„éˆæ„Ÿç©ºé–“</p></div>
            <input type="text" v-model="inputUser" placeholder="å¸³è™Ÿ" class="w-full p-3 mb-3 border border-stone-200 rounded-xl outline-none focus:border-orange-500">
            <input type="password" v-model="inputPwd" placeholder="å¯†ç¢¼" class="w-full p-3 mb-4 border border-stone-200 rounded-xl outline-none focus:border-orange-500">
            <button @click="checkLogin" class="w-full bg-[#ea580c] text-white p-3 rounded-xl font-bold hover:bg-orange-600 transition-all">é€²å…¥å»šæˆ¿</button>
        </div>
    </div>

    <div v-if="showInfoModal" class="info-modal-overlay fixed inset-0 flex items-center justify-center p-4 bg-black/50" @click="showInfoModal = false">
        <div class="bg-white w-full max-w-[500px] max-h-[85vh] overflow-y-auto rounded-[32px] p-8 relative shadow-2xl no-scrollbar" @click.stop>
            <button class="absolute top-6 right-6 text-stone-400 hover:text-stone-800" @click="showInfoModal = false"><i class="fas fa-times text-xl"></i></button>
            
            <div v-if="modalMode === 'personal'">
                <div class="flex items-center gap-6 mb-8 border-b border-stone-50 pb-8">
                    <img :src="userProfile.avatar || 'logo.jpg'" class="w-20 h-20 rounded-full object-cover border-2 border-orange-100 p-1">
                    <div class="flex-1">
                        <h2 class="text-xl font-bold text-stone-800">{{ userProfile.name }}</h2>
                        <p class="text-xs text-stone-400 mt-1">{{ userProfile.bio }}</p>
                        <button @click="isEditingProfile = !isEditingProfile" class="mt-3 text-[10px] font-bold text-stone-500 px-3 py-1 border border-stone-200 rounded-md">{{ isEditingProfile ? 'å–æ¶ˆ' : 'ç·¨è¼¯è³‡æ–™' }}</button>
                    </div>
                </div>
                <div v-if="isEditingProfile" class="bg-stone-50 p-6 rounded-2xl mb-8 animate-fade-up">
                    <input v-model="userProfile.name" class="w-full p-2 mb-3 border border-stone-200 rounded-lg text-sm" placeholder="ä¸»å»šåç¨±...">
                    <input v-model="userProfile.avatar" class="w-full p-2 mb-3 border border-stone-200 rounded-lg text-sm" placeholder="å¤§é ­è²¼ URL...">
                    <textarea v-model="userProfile.bio" class="w-full p-2 mb-3 border border-stone-200 rounded-lg text-sm" placeholder="å€‹äººç°¡ä»‹..."></textarea>
                    <button @click="saveProfile" class="w-full bg-stone-800 text-white py-2 rounded-xl text-xs font-bold">å„²å­˜æ›´æ–°</button>
                </div>
                <h3 class="text-xs font-bold text-stone-400 mb-4"><i class="fas fa-heart text-rose-400 mr-1"></i> æˆ‘çš„æ”¶è— (é»æ“Šè·³è½‰)</h3>
                <div v-if="favorites.length > 0" class="space-y-2">
                    <div v-for="favName in favorites" :key="favName" @click="scrollToRecipe(favName)" class="flex items-center p-3 bg-stone-50 rounded-xl cursor-pointer hover:bg-orange-50">
                        <div class="w-8 h-8 rounded bg-orange-100 flex items-center justify-center text-orange-500 mr-3 text-xs">ğŸ²</div>
                        <span class="text-sm font-medium">{{ favName }}</span>
                    </div>
                </div>
            </div>

            <div v-else-if="modalMode === 'suggestion'" class="suggest-box">
                <div class="text-center mb-6">
                    <div class="text-3xl mb-2">ğŸ“®</div>
                    <h2 class="text-xl font-bold text-stone-800">å‹›å‹›å»ºè­°ç®±</h2>
                    <p class="text-xs text-stone-400 mt-1">å°ç¶²ç«™æœ‰ä»»ä½•æƒ³æ³•ï¼Ÿå¯«çµ¦è¨­è¨ˆå¸«å§ï¼</p>
                </div>
                <textarea v-model="suggestionText" rows="5" class="w-full p-4 border border-stone-200 rounded-2xl text-sm outline-none focus:border-orange-500" placeholder="å¯«ä¸‹çµ¦è¨­è¨ˆå¸«çš„è©±..."></textarea>
                <button @click="sendSuggestion" :disabled="isSendingSuggest || !suggestionText" class="w-full bg-[#ea580c] text-white py-3 rounded-2xl font-bold mt-4 hover:bg-orange-600 transition-colors">
                    {{ isSendingSuggest ? 'å‚³é€ä¸­...' : 'å¯„å‡ºå»ºè­°' }}
                </button>
            </div>

            <div v-else class="info-content" v-html="infoModalContent"></div>
            
            <div class="mt-8 pt-6 border-t border-stone-100 text-center">
                 <button @click="showInfoModal = false" class="text-sm font-bold text-stone-400 px-6 py-2 border border-stone-200 rounded-full hover:bg-stone-50">è¿”å›é¦–é </button>
            </div>
        </div>
    </div>

    <div v-if="showMenu" class="fixed inset-0 z-[60] bg-black/40" @click="showMenu = false"></div>
    <aside :class="['fixed top-0 left-0 bottom-0 bg-white z-[70] p-8 shadow-2xl transition-transform duration-300 sidebar-menu', showMenu ? 'translate-x-0' : '-translate-x-full']">
        <div class="flex items-center justify-between mb-10">
            <h2 class="text-2xl font-bold text-stone-800">é¸å–®</h2>
            <button @click="showMenu = false" class="text-stone-400 hover:text-stone-800"><i class="fas fa-times text-xl"></i></button>
        </div>
        <div class="space-y-8 flex-1 overflow-y-auto no-scrollbar">
            <div v-for="(links, category) in menuItems" :key="category">
                <h3 class="text-[11px] font-bold text-stone-300 uppercase tracking-widest mb-3">{{ category }}</h3>
                <div class="space-y-1">
                    <a v-for="link in links" :key="link" @click="handleMenuClick(link)" class="block py-2 text-stone-600 font-medium hover:text-orange-600 transition-colors cursor-pointer border-b border-stone-50">{{ link }}</a>
                </div>
            </div>
        </div>
    </aside>

    <div class="app-shell flex flex-col">
        <header class="pt-8 px-6 pb-4 flex items-center gap-4 bg-[#fdfbf7] sticky top-0 z-50">
            <button @click="showMenu = true" class="w-10 h-10 flex items-center justify-center text-stone-600 hover:bg-stone-100 rounded-full"><i class="fas fa-bars text-xl"></i></button>
            <div class="w-12 h-12 rounded-full overflow-hidden border-2 border-white shadow-md">
                <img :src="userProfile.avatar || 'logo.jpg'" alt="Profile" class="w-full h-full object-cover">
            </div>
            <div class="flex-1">
                <h1 class="text-xl font-bold text-stone-800 tracking-tight">å‹›å‹›ä¸Šèœ</h1>
                <p class="text-[10px] text-stone-400 font-medium">å‹›å‹›ä¸Šèœï¼Œé™ªä½ ç”¨å¿ƒéç”Ÿæ´»ã€‚</p>
            </div>
            <button v-if="selected.length" @click="selected = []" class="text-xs font-bold text-orange-600 bg-orange-50 px-4 py-2 rounded-full">æ¸…é™¤ ({{ selected.length }})</button>
        </header>

        <nav class="sticky top-[84px] z-40 bg-[#fdfbf7]/90 backdrop-blur px-6 border-b border-stone-100">
            <div class="flex overflow-x-auto no-scrollbar pb-1">
                <button v-for="tab in tabs" :key="tab.id" @click="currentTab = tab.id" :class="['tab-btn', currentTab === tab.id ? 'active' : '']">{{ tab.name }}</button>
            </div>
        </nav>

        <main class="flex-1 px-6 pb-20">
            <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                <div class="space-y-6">
                    <div v-for="(list, group) in ingredientGroups" :key="group">
                        <h3 class="text-[11px] font-bold text-stone-300 mb-3">{{ group }}</h3>
                        <div class="flex flex-wrap gap-2">
                            <button v-for="item in list" :key="item" @click="toggle(item)" :class="['chip px-3 py-1.5 rounded-xl text-sm font-medium border border-stone-200 bg-white text-stone-600', selected.includes(item) ? 'active' : 'hover:bg-stone-50']">{{ item }}</button>
                        </div>
                    </div>
                </div>
                <div class="p-6 bg-stone-50 rounded-[32px] self-start">
                    <h3 class="text-[11px] font-bold text-stone-300 mb-4">é¢¨æ ¼æ¢ç´¢</h3>
                    <div class="flex flex-wrap gap-2">
                        <button v-for="style in styles" :key="style" @click="toggle(style)" :class="['chip px-4 py-2 rounded-full text-xs font-medium border border-stone-200 bg-white text-stone-500', selected.includes(style) ? 'active' : 'hover:bg-stone-100']">#{{ style }}</button>
                    </div>
                </div>
            </div>

            <div v-if="filteredRecipes.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 items-stretch">
                <div v-for="recipe in filteredRecipes" :key="recipe.name" :id="'recipe-' + recipe.name" class="recipe-card animate-fade-up">
                    <div class="relative h-48 w-full shrink-0">
                        <button @click.stop="toggleFavorite(recipe.name)" :class="['favorite-btn shadow-md', isFav(recipe.name) ? 'is-fav' : '']"><i :class="[isFav(recipe.name) ? 'fas' : 'far', 'fa-heart']"></i></button>
                        <img :src="recipe.img" class="w-full h-full object-cover rounded-t-[24px]">
                        <div class="absolute top-4 right-4 bg-white/90 backdrop-blur px-3 py-1 rounded-full text-[10px] font-bold">{{ recipe.time }}</div>
                    </div>
                    <div class="p-6 flex flex-col flex-1">
                        <h2 class="text-xl font-bold text-stone-800 mb-4">{{ recipe.name }}</h2>
                        <div class="space-y-4 flex-1">
                            <div><h4 class="text-[10px] font-bold text-stone-300 uppercase mb-2">æº–å‚™é£Ÿæ</h4><p class="text-sm text-stone-500 leading-relaxed"><span v-for="(ing, i) in recipe.ingredients" :key="i">{{ ing.name }} {{ ing.qty }}<span v-if="i < recipe.ingredients.length-1">ã€</span></span></p></div>
                            <div :class="['gf-box p-4 rounded-2xl relative transition-all duration-500', recipe.showSecret ? 'warm-mode' : '']">
                                <div class="flex items-center gap-2 mb-2"><i :class="['fas', recipe.showSecret ? 'fa-heart text-orange-500' : 'fa-comment-dots text-rose-400']"></i><span class="text-[10px] font-bold opacity-60">é»è©•</span></div>
                                <p class="text-xs font-medium italic leading-relaxed">â€œ{{ recipe.showSecret ? recipe.secretMsg : recipe.gf }}â€</p>
                                <div v-if="recipe.secretMsg && !recipe.showSecret" @click.stop="triggerSecret(recipe)" class="secret-heart"><i class="fas fa-heart"></i></div>
                            </div>
                            <div class="chef-note">
                                <h4 class="text-[10px] font-bold text-stone-400 mb-3 flex justify-between"><span><i class="fas fa-pen-nib mr-1.5"></i> ä¸»å»šç­†è¨˜</span></h4>
                                <div class="max-h-[80px] overflow-y-auto no-scrollbar space-y-2 mb-3">
                                    <div v-for="(note, idx) in recipe.savedNotes" :key="idx" class="text-[10px] border-l-2 border-stone-200 pl-2">
                                        <div class="text-stone-300 flex justify-between">{{ note.date }} <button @click="deleteNote(recipe, idx)">Ã—</button></div>
                                        <p class="text-stone-500">{{ note.text }}</p>
                                    </div>
                                </div>
                                <textarea v-model="recipe.userFeedback" rows="1" class="chef-input" placeholder="ç´€éŒ„é€™æ¬¡çš„å¿ƒå¾—..."></textarea>
                                <button @click="saveAndSend(recipe)" class="bg-stone-800 text-white text-[10px] px-3 py-1 rounded-md float-right mt-2">å„²å­˜</button>
                                <div class="clear-both"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="bg-[#fdfbf7] text-stone-400 py-16 px-6 border-t border-stone-100">
            <div class="max-w-[1200px] mx-auto grid grid-cols-2 md:grid-cols-4 gap-12 text-left">
                <div class="col-span-2 md:col-span-1">
                    <h1 class="text-xl font-bold text-stone-800 mb-4">å‹›å‹›ä¸Šèœ</h1>
                    <p class="text-sm leading-relaxed text-stone-500 font-medium">å‹›å‹›ä¸Šèœï¼Œé™ªä½ ç”¨å¿ƒéç”Ÿæ´»ã€‚</p>
                </div>
                <div v-for="(links, category) in menuItems" :key="category">
                    <h4 class="text-stone-800 text-sm font-bold mb-6 tracking-widest">{{ category }}</h4>
                    <ul class="space-y-3 text-sm">
                        <li v-for="link in links" :key="link" @click="handleMenuClick(link)" class="hover:text-orange-600 transition-colors cursor-pointer text-stone-500">{{ link }}</li>
                    </ul>
                </div>
            </div>
        </footer>
    </div>
</div>

<script src="data.js"></script>

<script>
const { createApp, ref, computed, onMounted } = Vue;

createApp({
    setup() {
        const selected = ref([]);
        const currentTab = ref('all');
        const recipes = ref(typeof allRecipes !== 'undefined' ? allRecipes : []);
        const favorites = ref([]);
        const showMenu = ref(false);
        const showInfoModal = ref(false);
        const infoModalContent = ref('');
        const modalMode = ref('info');
        const isEditingProfile = ref(false);
        const suggestionText = ref('');
        const isSendingSuggest = ref(false);
        const isShake = ref(false);

        const userProfile = ref({ name: 'å¼µæ™¯å‹›å»ºç¯‰å¸«', bio: 'åœ¨é€™è£¡ï¼Œå¸ä¸‹å»ºç¯‰åœ–ç´™ï¼Œå‹¾å‹’å®¶çš„æº«åº¦ã€‚', avatar: '' });

        const showLoginModal = ref(false);
        const inputUser = ref('');
        const inputPwd = ref('');
        const CORRECT_USER = 'shyun';
        const CORRECT_PWD = 'love1314';

        const tabs = [{ id: 'all', name: 'å…¨éƒ¨' }, { id: 'main', name: 'åƒé£½ä¸»é£Ÿ' }, { id: 'side', name: 'å®µå¤œä¸‹é…’' }, { id: 'brunch', name: 'æ—©åˆé¤' }, { id: 'teatime', name: 'åˆèŒ¶ç”œé»' }];
        
        // é¸å–®é †åºå„ªåŒ–
        const menuItems = {
            'é—œæ–¼': ['ç¶²ç«™ä»‹ç´¹', 'é—œæ–¼å‹›å‹›ä¸Šèœ', 'åŠ å…¥æˆ‘å€‘', 'å»£å‘Šåˆä½œ'],
            'æœƒå“¡æœå‹™': ['å€‹äººé é¢', 'é£Ÿè­œæ”¶è—', 'å‹›å‹›å»ºè­°ç®±', 'å¸³è™Ÿè¨­å®š', 'å¿˜è¨˜å¯†ç¢¼'],
            'å“ç‰Œæ”¿ç­–': ['æœå‹™æ¢æ¬¾']
        };

        const contentData = {
            'é—œæ–¼å‹›å‹›ä¸Šèœ': `
                <h2>å‹›å‹›ä¸Šèœï½œå¼µæ™¯å‹›å»ºç¯‰å¸«çš„ç§æˆ¿éˆæ„Ÿé£Ÿè­œ</h2>
                <div class="info-quote">ã€Œå¸ä¸‹å»ºç¯‰åœ–ç´™ï¼Œåœ¨å»šæˆ¿è£¡å‹¾å‹’å®¶çš„æº«åº¦ã€‚ã€</div>
                <h3>â–é—œæ–¼é€™å€‹ç¶²ç«™ï¼šå¾è—åœ–åˆ°é¤ç›¤çš„ç™‚ç™’è½‰èº«</h3>
                <p>å°æ–¼å¼µæ™¯å‹›å»ºç¯‰å¸«ä¾†èªªï¼Œç™½å¤©æ˜¯åœ¨ç·šæ¢èˆ‡çµæ§‹ä¸­æ§‹ç¯‰åŸå¸‚çš„é¢¨æ™¯ï¼›è€Œå¤œæ™šï¼Œå‰‡æ˜¯èµ°é€²å»šæˆ¿ï¼Œåœ¨é‹ç¢—ç“¢ç›†é–“å°‹æ‰¾ç”Ÿæ´»çš„ç¯€å¥ã€‚</p>
                <p>ã€Œå‹›å‹›ä¸Šèœã€ æ˜¯å°ˆç‚ºå¼µå»ºç¯‰å¸«é‡èº«æ‰“é€ çš„å€‹äººå°ˆå±¬é£Ÿè­œç©ºé–“ã€‚æˆ‘å€‘æ·±çŸ¥å»ºç¯‰å¸«çš„å·¥ä½œå……æ»¿æŒ‘æˆ°èˆ‡é«˜å£“ï¼Œå› æ­¤é€™å€‹ç¶²ç«™ä¸åªæ˜¯é£Ÿè­œçš„å †ç–Šï¼Œæ›´æ˜¯ä¸€å€‹ã€Œæ±ºç­–æ¸›å£“ã€çš„è£œçµ¦ç«™ã€‚è®“æ‚¨åœ¨çµæŸå¿™ç¢Œçš„è¨­è¨ˆå·¥ä½œå¾Œï¼Œä¸å¿…å†ç‚ºã€Œæ™šé¤åƒä»€éº¼ã€è€Œç…©æƒ±ï¼Œåªéœ€è¼•è¼•ä¸€é»ï¼Œå°±èƒ½æ‰¾åˆ°å°ˆå±¬æ–¼æ‚¨çš„ç¾å‘³éˆæ„Ÿã€‚</p>
                <h3>â–ç¶²ç«™ç‰¹è‰²äº®é»</h3>
                <p><strong>âœï¸ å°ˆå±¬å»ºç¯‰å¸«çš„ã€Œæ–™ç†å‚™è¨»æ¬„ã€ï¼š</strong>æ¯ä¸€é“æ–™ç†éƒ½æ˜¯ä¸€æ¬¡å¯¦é©—ã€‚ç´€éŒ„ä¸‹ç«å€™èª¿æ•´ã€èª¿å‘³æ¯”ä¾‹ï¼Œæ‰“é€ å‡ºä¸æ–·é€²åŒ–çš„ã€Œå‹³å¼é¢¨å‘³ã€ã€‚</p>
                <p><strong>ğŸ’¡ å¿«é€Ÿæ±ºç­–ï¼Œæ•ˆç‡ä¸‹å»šï¼š</strong>é‡å°å»ºç¯‰å¸«é«˜æ•ˆçš„ç”Ÿæ´»æ­¥èª¿ï¼Œé£Ÿè­œåˆ†é¡æ¸…çˆ½ç›´è§€ã€‚</p>
                <p><strong>ğŸ¨ è·äººè·¨ç•Œå°è©±ï¼š</strong>é€™æ˜¯ä¸€å€‹æœƒã€Œæˆé•·ã€çš„ç¶²é ã€‚é€éå…§å»ºçš„å›é¥‹æ©Ÿåˆ¶ï¼Œæ‚¨çš„æ¯ä¸€æ¢ä½¿ç”¨å»ºè­°éƒ½èƒ½ç›´é”ç¶²é è¨­è¨ˆå¸«ã€‚</p>
                <h3>â–å¯«çµ¦æ™¯å‹›å»ºç¯‰å¸«çš„ä¸€æ®µè©±</h3>
                <div class="info-quote">ã€Œå»ºç¯‰æ˜¯ç‚ºäº†å®‰ç½®èº«é«”ï¼Œè€Œæ–™ç†æ˜¯ç‚ºäº†å®‰æ”¾éˆé­‚ã€‚ã€</div>
                <p>è¾›è‹¦äº†ï¼Œå¼µå»ºç¯‰å¸«ã€‚ç•¶æ‚¨æ¨é–‹å®¶é–€ï¼Œæ›ä¸‹æ­£è£ï¼Œé€™è£¡å°±æ˜¯æ‚¨çš„å‰µæ„å¯¦é©—å®¤ã€‚é¡˜é€™å€‹ç¶²é èƒ½é™ªä¼´æ‚¨ï¼Œåœ¨ç†±æ°£é¨°é¨°çš„é£¯èœé¦™ä¸­ï¼Œæ‰¾å›æœ€ç´”ç²¹çš„å¿«æ¨‚èˆ‡æ»¿è¶³ã€‚</p>`,
            'ç¶²ç«™ä»‹ç´¹': `
                <h2>ç¶²ç«™åŠŸèƒ½æ¦‚è¦½</h2>
                <ul class="info-list">
                    <li><strong>éˆæ„Ÿæœå°‹ï¼š</strong>ä¾å†°ç®±å‰©é¤˜é£Ÿæå¿«é€ŸåŒ¹é…ã€‚</li>
                    <li><strong>ç§æˆ¿ç­†è¨˜ï¼š</strong>è¨˜éŒ„æ¯ä¸€é“èœçš„å¾®èª¿ç´°ç¯€èˆ‡å¿ƒå¾—ã€‚</li>
                    <li><strong>ä¸€éµå°è©±ï¼š</strong>å‘è¨­è¨ˆå¸«æä¾›åé¥‹ï¼ŒæŒçºŒå„ªåŒ–æ‚¨çš„æ•¸ä½å»šæˆ¿ã€‚</li>
                    <li><strong>æº«é¦¨æ’ç‰ˆï¼š</strong>è¦–è¦ºæŸ”å’Œï¼Œå°ˆç‚ºå¤œé–“ä¸‹ç­å¾Œçš„ä½¿ç”¨é«”é©—å„ªåŒ–ã€‚</li>
                </ul>`,
            'æœå‹™æ¢æ¬¾': `
                <h2>æœå‹™æ¢æ¬¾</h2>
                <div class="terms-section">
                    <h3>1. èªçŸ¥èˆ‡æ¥å—æ¢æ¬¾</h3>
                    <p>å‹›å‹›ä¸Šèœä¿‚ä¾æ“šæœ¬æœå‹™æ¢æ¬¾æä¾›ã€Œå¼µæ™¯å‹›å»ºç¯‰å¸«ã€å°ˆå±¬é£Ÿè­œæœå‹™ã€‚ç•¶æ‚¨é–‹å§‹ç€è¦½é£Ÿè­œæˆ–ç´€éŒ„å¿ƒå¾—æ™‚ï¼Œå³è¡¨ç¤ºæ‚¨å·²åŒæ„æ¥å—é€™ä»½å……æ»¿æ„›çš„æ¢æ¬¾ã€‚å‹›å‹›ä¸Šèœæœ‰æ¬Šéš¨æ™‚ä¿®æ”¹æ¢æ¬¾ï¼Œè‹¥æ‚¨ç¹¼çºŒç…®é£¯ï¼Œè¦–ç‚ºæ‚¨é¡˜æ„ç¹¼çºŒéµå®ˆï¼ˆä¸¦åŠ ç¢¼å¯µæ„›å¥³å‹ï¼‰ã€‚</p>
                    <h3>2. æ‚¨çš„è¨»å†Šèˆ‡æº–æ™‚é–‹é£¯ç¾©å‹™</h3>
                    <p>æ‚¨åŒæ„ï¼šæä¾›æ­£ç¢ºé£Ÿææ¸…å–®èˆ‡ä¸‹ç­æ™‚é–“ã€‚è‹¥å› åŠ ç­å°è‡´é–‹é£¯æ™šäº†ï¼Œæ‚¨é ˆç„¡å„Ÿå¹«å¥³å‹æŒ‰æ‘© 30 åˆ†é˜ä½œç‚ºè£œå„Ÿã€‚</p>
                    <h3>3. æœƒå“¡å¸³è™Ÿã€å¯†ç¢¼åŠå±…å®¶å®‰å…¨</h3>
                    <p>è‹¥ç™¼ç”Ÿã€Œå»šæˆ¿å¤±ç«ã€æˆ–ã€Œå¯†ç¢¼éºå¿˜ã€ç­‰å®‰å…¨å•é¡Œï¼Œè«‹ç«‹å³é€šçŸ¥æ‚¨çš„ç¶²é è¨­è¨ˆå¸«ã€‚æ¯æ¬¡ç…®é£¯å®Œç•¢ï¼Œè«‹è¨˜å¾—æ¸…ç†æµç†å°ï¼Œè‹¥æœªå®Œæˆï¼Œé ˆç¹³äº¤å¥³å‹ä¿è­·è²» 300 å…ƒã€‚</p>
                    <h3>4. ä½¿ç”¨è€…çš„å®ˆæ³•ç¾©å‹™èˆ‡ã€Œæ„›çš„æ‰¿è«¾ã€</h3>
                    <p>ä¸å¾—åœ¨é£Ÿè­œå‚™è¨»æ¬„ä¸­å¼µè²¼ä»»ä½•ã€Œå«Œæ£„å¥³å‹å»šè—ã€æˆ–ã€Œä¸æƒ³æ´—ç¢—ã€ç­‰å…·æ”»æ“Šæ€§æ–‡å­—ã€‚è‹¥æœ‰é•åï¼Œä¸è«–æƒ…ç¯€è¼•é‡ï¼Œä¸€å¾‹ç½°å¹«å¥³å‹æŒ‰æ‘© 30 åˆ†é˜ã€‚ç™¼ç¾å«å¤–é€å½è£è‡ªç…®è€…ï¼Œæ‡‰ç«‹å³çµ¦äºˆå¥³å‹ä¿è­·è²» 300 å…ƒã€‚</p>
                    <h3>5. è³‡è¨Šæˆ–å»ºè­°ï¼šå»ºç¯‰å¸«çš„å°ˆæ¥­å …æŒ</h3>
                    <p>å‹›å‹›ä¸Šèœæä¾›çš„è³‡è¨Šä¸æ“”ä¿çµ•å°ç²¾ç¢ºã€‚è‹¥ä¾ç…§é£Ÿè­œç…®å‡ºå¤ªé¹¹çš„èœè‰²ï¼Œæ‚¨æ‡‰ä¸»å‹•æä¾›å¥³å‹ 30 åˆ†é˜æŒ‰æ‘©æœå‹™ä»¥è½‰ç§»å…¶å‘³è¦ºæ³¨æ„ã€‚</p>
                    <h3>9. ä¸€èˆ¬æ¢æ¬¾</h3>
                    <p>æœ¬æœå‹™æ¢æ¬¾è‹¥æœ‰çˆ­è­°ï¼Œæ‡‰ä»¥<strong>ã€Œå¥³å‹æ°¸é æ˜¯å°çš„ã€</strong>ç‚ºæœ€é«˜æŒ‡å°åŸå‰‡ï¼Œä¸¦ä»¥ã€Œæ—‹è½‰èŠ±å¸‚ã€ç‚ºç¬¬ä¸€å¯©ç®¡è½„æ³•é™¢ã€‚</p>
                </div>`,
            'å¸³è™Ÿè¨­å®š': `<h2>ğŸ‘¤ å¸³è™Ÿè¨­å®š</h2><p>èº«åˆ†ï¼šæ¦®è­½ä¸»å»š / å¼µæ™¯å‹›å»ºç¯‰å¸«<br>æ¬Šé™ï¼šé‘½çŸ³ç´šVIPæ°¸ä¹…æˆæ¬Š<br>ç¶å®šï¼šå·²èˆ‡å°ˆå±¬è¨­è¨ˆå¸«(å¥³å‹)æˆåŠŸç¶å®š</p>`,
            'å¿˜è¨˜å¯†ç¢¼': `<h2>ğŸ”‘ å¿˜è¨˜å¯†ç¢¼ï¼Ÿ</h2><p>è«‹ä¸»å‹•è¯ç¹«æ‚¨çš„ã€Œå°ˆå±¬è¨­è¨ˆå¸«(å¥³å‹)ã€ï¼Œä¸¦æ”¯ä»˜ <strong>300 å…ƒä¿è­·è²»</strong> æˆ– <strong>30 åˆ†é˜æŒ‰æ‘©æœå‹™</strong> ä»¥æ›å–å¯†ç¢¼æç¤ºã€‚</p>`
        };

        const handleMenuClick = (item) => {
            showMenu.value = false;
            if (item === 'å€‹äººé é¢' || item === 'é£Ÿè­œæ”¶è—') {
                modalMode.value = 'personal';
                showInfoModal.value = true;
            } else if (item === 'å‹›å‹›å»ºè­°ç®±') {
                modalMode.value = 'suggestion';
                showInfoModal.value = true;
            } else if (contentData[item]) {
                modalMode.value = 'info';
                infoModalContent.value = contentData[item];
                showInfoModal.value = true;
            } else { alert('å»ºç½®ä¸­ï¼â¤ï¸'); }
        };

        const sendSuggestion = () => {
            if (!suggestionText.value) return;
            isSendingSuggest.value = true;
            emailjs.send('service_voqowbk', 'template_d6l7uav', { recipe_name: 'å»ºç¯‰å¸«çš„å»ºè­°ç®±', message: suggestionText.value }).then(() => {
                alert('ğŸ“ å»ºè­°å·²æˆåŠŸå¯„çµ¦è¨­è¨ˆå¸«å›‰ï¼è¬è¬å‹›å‹› â¤ï¸');
                suggestionText.value = '';
                showInfoModal.value = false;
            }).finally(() => { isSendingSuggest.value = false; });
        };

        const saveProfile = () => { localStorage.setItem('shyun_profile', JSON.stringify(userProfile.value)); isEditingProfile.value = false; alert('æ›´æ–°æˆåŠŸï¼âœ¨'); };
        const toggleFavorite = (name) => {
            const idx = favorites.value.indexOf(name);
            if (idx > -1) favorites.value.splice(idx, 1); else favorites.value.push(name);
            localStorage.setItem('shyun_favorites', JSON.stringify(favorites.value));
        };
        const isFav = (name) => favorites.value.includes(name);

        const scrollToRecipe = (name) => {
            showInfoModal.value = false;
            setTimeout(() => {
                const el = document.getElementById('recipe-' + name);
                if (el) {
                    el.scrollIntoView({ behavior: 'smooth' });
                    el.style.boxShadow = "0 0 0 4px #ea580c";
                    setTimeout(() => el.style.boxShadow = "0 10px 30px rgba(0,0,0,0.03)", 1500);
                }
            }, 300);
        };

        const checkLogin = () => {
            if (inputUser.value === CORRECT_USER && inputPwd.value === CORRECT_PWD) {
                showLoginModal.value = false;
                localStorage.setItem('shyun_auth_pass', 'true');
            } else { isShake.value = true; setTimeout(() => isShake.value = false, 500); }
        };

        onMounted(() => {
            emailjs.init('OYM1raInOn1sEW7FG');
            favorites.value = JSON.parse(localStorage.getItem('shyun_favorites') || '[]');
            const savedP = localStorage.getItem('shyun_profile');
            if (savedP) userProfile.value = JSON.parse(savedP);
            loadNotesFromStorage();
            if (!localStorage.getItem('shyun_auth_pass')) setTimeout(() => showLoginModal.value = true, 5000);
        });

        const loadNotesFromStorage = () => {
            const savedData = localStorage.getItem('shyun_cook_notes');
            if (savedData) {
                const notesMap = JSON.parse(savedData);
                recipes.value.forEach(r => { r.savedNotes = notesMap[r.name] || []; });
            }
        };

        const saveAndSend = (recipe) => {
            if (!recipe.userFeedback) return;
            if (!recipe.savedNotes) recipe.savedNotes = [];
            recipe.savedNotes.unshift({ date: new Date().toLocaleDateString(), text: recipe.userFeedback });
            const notesMap = {};
            recipes.value.forEach(r => { if (r.savedNotes && r.savedNotes.length > 0) notesMap[r.name] = r.savedNotes; });
            localStorage.setItem('shyun_cook_notes', JSON.stringify(notesMap));
            emailjs.send('service_voqowbk', 'template_d6l7uav', { recipe_name: recipe.name, message: recipe.userFeedback });
            recipe.userFeedback = ''; alert('ç­†è¨˜å·²å„²å­˜ä¸¦å¯„çµ¦è¨­è¨ˆå¸«ï¼');
        };

        const deleteNote = (recipe, idx) => {
            recipe.savedNotes.splice(idx, 1);
            const notesMap = {};
            recipes.value.forEach(r => { if (r.savedNotes && r.savedNotes.length > 0) notesMap[r.name] = r.savedNotes; });
            localStorage.setItem('shyun_cook_notes', JSON.stringify(notesMap));
        };

        const ingredientGroups = { 'ğŸ¥© è‚‰é¡': ['äº”èŠ±è‚‰', 'æ’éª¨', 'è±¬è‚‰ç‰‡', 'é›è…¿æ’'], 'ğŸŸ æµ·é®®': ['é±¸é­š', 'å°ç£é¯›', 'è™±ç›®é­š'], 'ğŸ¥¦ è”¬æœ': ['é’æ±Ÿèœ', 'ç©ºå¿ƒèœ', 'åœ°ç“œè‘‰'], 'ğŸ“¦ ä¹¾è²¨åŠ å·¥': ['è±†çš®', 'æ²¹è±†è…', 'è…çš®'] };
        const styles = ['å°å¼', 'æ—¥å¼', 'ç¾©å¼', 'æ³°å¼', 'æ—©åˆé¤', 'å®¶å¸¸ç†±ç‚’'];
        const toggle = (i) => { const idx = selected.value.indexOf(i); if (idx > -1) selected.value.splice(idx, 1); else selected.value.push(i); };
        const filteredRecipes = computed(() => {
            let res = recipes.value;
            if (selected.value.length > 0) res = res.filter(r => r.tags.some(t => selected.value.includes(t)));
            if (currentTab.value !== 'all') res = res.filter(r => r.type === currentTab.value);
            return res;
        });
        const triggerSecret = (recipe) => { recipe.showSecret = true; };

        return { selected, ingredientGroups, styles, recipes, toggle, filteredRecipes, currentTab, triggerSecret, saveAndSend, deleteNote, showLoginModal, inputUser, inputPwd, checkLogin, showMenu, menuItems, handleMenuClick, showInfoModal, infoModalContent, tabs: [{ id: 'all', name: 'å…¨éƒ¨' }, { id: 'main', name: 'åƒé£½ä¸»é£Ÿ' }, { id: 'side', name: 'å®µå¤œä¸‹é…’' }, { id: 'brunch', name: 'æ—©åˆé¤' }, { id: 'teatime', name: 'åˆèŒ¶ç”œé»' }], toggleFavorite, isFav, favorites, modalMode, isEditingProfile, userProfile, saveProfile, scrollToRecipe, isShake, suggestionText, isSendingSuggest, sendSuggestion };
    }
}).mount('#app');
</script>

</body>
</html>