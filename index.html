<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å‹›å‹›ä¸Šèœ v18.1 - æ„›çš„æ¢æ¬¾æ›´æ–°ç‰ˆ</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        [v-cloak] { display: none; }
        body { background-color: #fdfbf7; font-family: 'Noto Sans TC', sans-serif; color: #44403c; -webkit-tap-highlight-color: transparent; }
        .app-shell { max-width: 500px; margin: 0 auto; min-height: 100vh; background: #fdfbf7; position: relative; overflow-x: hidden; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .tab-btn { padding: 8px 0; margin-right: 24px; color: #a8a29e; font-weight: 500; transition: all 0.3s; position: relative; white-space: nowrap; }
        .tab-btn.active { color: #1c1917; font-weight: 700; font-size: 1.1em; }
        .tab-btn.active::after { content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; background: #ea580c; border-radius: 50%; }
        .chip { transition: all 0.2s; white-space: nowrap; }
        .chip.active { background: #1c1917 !important; color: white !important; border-color: #1c1917 !important; box-shadow: 0 4px 12px rgba(0,0,0,0.15); transform: translateY(-1px); }
        .recipe-card { background: white; border-radius: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.03); transition: transform 0.3s; }
        .recipe-card:active { transform: scale(0.98); }
        .animate-fade-up { animation: fadeInUp 0.5s ease-out forwards; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .gf-box { background: #fff1f2; border-left: 4px solid #f43f5e; color: #9f1239; }
        .gf-box.warm-mode { background: #fff7ed; border-left-color: #f97316; color: #9a3412; }
        @keyframes heartbeat { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
        .secret-heart { animation: heartbeat 1.5s infinite; cursor: pointer; position: absolute; top: 12px; right: 12px; color: #f43f5e; font-size: 1.2rem; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1)); }

        .chef-note { background: #f5f5f4; border-radius: 16px; padding: 16px; margin-top: 16px; }
        .chef-input { width: 100%; background: white; border: 1px solid #e7e5e4; border-radius: 8px; padding: 10px; font-size: 14px; margin-top: 8px; outline: none; transition: border 0.3s; resize: none; }
        .chef-input:focus { border-color: #a8a29e; }
        .send-btn { background: #44403c; color: white; border-radius: 8px; padding: 6px 16px; font-size: 12px; font-weight: bold; margin-top: 8px; float: right; transition: background 0.2s; }
        .send-btn:active { background: #1c1917; }
        .send-btn:disabled { background: #d6d3d1; cursor: not-allowed; }

        .history-item { border-left: 3px solid #d6d3d1; padding-left: 12px; margin-bottom: 12px; background: white; padding: 10px; border-radius: 0 8px 8px 0; }
        .history-date { font-size: 10px; color: #a8a29e; font-weight: bold; margin-bottom: 2px; }
        .history-content { font-size: 13px; color: #57534e; line-height: 1.4; }
        .delete-note { float: right; color: #ef4444; font-size: 10px; cursor: pointer; opacity: 0.5; }

        .login-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(8px); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .login-box { background: white; width: 85%; max-width: 320px; padding: 30px; border-radius: 24px; box-shadow: 0 20px 50px rgba(0,0,0,0.2); text-align: center; }
        .login-input { width: 100%; padding: 12px; margin-bottom: 12px; border: 1px solid #e7e5e4; border-radius: 12px; background: #fdfbf7; outline: none; transition: all 0.3s; }
        .login-input:focus { border-color: #ea580c; background: white; }
        .login-btn { width: 100%; background: #ea580c; color: white; padding: 12px; border-radius: 12px; font-weight: bold; margin-top: 8px; transition: 0.2s; }
        .login-btn:active { transform: scale(0.95); }
        .shake { animation: shake 0.5s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        .sidebar-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 60; transition: opacity 0.3s; }
        .sidebar-menu { position: fixed; top: 0; left: 0; bottom: 0; width: 280px; background: #fff; z-index: 70; padding: 24px; box-shadow: 4px 0 24px rgba(0,0,0,0.1); transform: translateX(-100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; }
        .sidebar-menu.open { transform: translateX(0); }
        .menu-group { margin-bottom: 24px; }
        .menu-title { font-size: 12px; font-weight: bold; color: #a8a29e; margin-bottom: 12px; letter-spacing: 1px; }
        .menu-link { display: block; padding: 10px 0; color: #44403c; font-size: 15px; font-weight: 500; border-bottom: 1px solid #f5f5f4; transition: color 0.2s; cursor: pointer; }
        .menu-link:hover { color: #ea580c; padding-left: 4px; }
        
        .footer-link { color: #78716c; font-size: 13px; margin-bottom: 8px; display: block; cursor: pointer; transition: color 0.2s; }
        .footer-link:hover { color: #ea580c; }

        /* è³‡è¨Šé–±è®€å½ˆçª— (Modal) */
        .info-modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); z-index: 80; display: flex; align-items: center; justify-content: center; }
        .info-modal { background: white; width: 90%; max-width: 450px; max-height: 80vh; overflow-y: auto; border-radius: 24px; padding: 24px; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .info-close { position: absolute; top: 16px; right: 16px; font-size: 20px; color: #a8a29e; cursor: pointer; padding: 8px; }
        .info-content h2 { font-size: 18px; font-weight: bold; color: #1c1917; margin-bottom: 12px; border-left: 4px solid #ea580c; padding-left: 10px; }
        .info-content h3 { font-size: 15px; font-weight: bold; color: #44403c; margin-top: 20px; margin-bottom: 8px; }
        .info-content p { font-size: 14px; color: #57534e; line-height: 1.8; margin-bottom: 12px; text-align: justify; }
        .info-quote { background: #fdfbf7; padding: 16px; border-radius: 12px; font-style: italic; color: #78716c; margin: 16px 0; font-size: 13px; border: 1px solid #f5f5f4; }
        .info-list li { font-size: 14px; color: #57534e; margin-bottom: 8px; padding-left: 16px; position: relative; }
        .info-list li::before { content: 'â€¢'; color: #ea580c; position: absolute; left: 0; font-weight: bold; }
        .terms-section { margin-bottom: 16px; padding-bottom: 12px; border-bottom: 1px dashed #f5f5f4; }
        .terms-num { font-weight: bold; color: #ea580c; margin-right: 4px; }
    </style>
</head>
<body>

<div id="app" v-cloak class="app-shell flex flex-col">
    
    <div v-if="showLoginModal" class="login-overlay animate-fade-up">
        <div :class="['login-box', isShake ? 'shake' : '']">
            <div class="mb-6">
                <div class="w-16 h-16 bg-stone-100 rounded-full mx-auto mb-3 flex items-center justify-center text-2xl">ğŸ”’</div>
                <h2 class="text-xl font-bold text-stone-800">è«‹å…ˆç™»å…¥</h2>
                <p class="text-xs text-stone-400 mt-1">é€™æ˜¯æˆ‘å€‘çš„å°å¤©åœ°ï¼Œè«‹è¼¸å…¥å¯†ç¢¼</p>
            </div>
            <input type="text" v-model="inputUser" placeholder="å¸³è™Ÿ" class="login-input">
            <input type="password" v-model="inputPwd" placeholder="å¯†ç¢¼" class="login-input">
            <button @click="checkLogin" class="login-btn">é€²å…¥å»šæˆ¿ <i class="fas fa-arrow-right ml-2"></i></button>
            <p v-if="loginError" class="text-xs text-red-500 mt-3 font-medium">å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤å›‰ï¼</p>
        </div>
    </div>

    <div v-if="showInfoModal" class="info-modal-overlay animate-fade-up" @click="showInfoModal = false">
        <div class="info-modal no-scrollbar" @click.stop>
            <button class="info-close" @click="showInfoModal = false"><i class="fas fa-times"></i></button>
            <div class="info-content" v-html="infoModalContent"></div>
            <div class="mt-8 pt-4 border-t border-stone-100 text-center">
                 <button @click="showInfoModal = false" class="text-xs font-bold text-stone-400 px-4 py-2 border border-stone-200 rounded-full hover:bg-stone-50">é—œé–‰é–±è®€</button>
            </div>
        </div>
    </div>

    <div v-if="showMenu" class="sidebar-overlay" @click="showMenu = false"></div>
    <aside :class="['sidebar-menu', showMenu ? 'open' : '']">
        <div class="flex items-center justify-between mb-8">
            <h2 class="text-xl font-bold text-stone-800">é¸å–®</h2>
            <button @click="showMenu = false" class="text-stone-400 hover:text-stone-800 text-lg">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto no-scrollbar">
            <div v-for="(links, category) in menuItems" :key="category" class="menu-group">
                <h3 class="menu-title">{{ category }}</h3>
                <a v-for="link in links" :key="link" @click="handleMenuClick(link)" class="menu-link">
                    {{ link }}
                </a>
            </div>
        </div>
        <div class="mt-auto pt-6 border-t border-stone-100 text-xs text-stone-400">
            <p>HsunHsun Cooking App v18.1</p>
            <p class="mt-1">Made with â¤ï¸</p>
        </div>
    </aside>

    <header class="pt-6 px-6 pb-2 flex items-center gap-4 bg-[#fdfbf7] sticky top-0 z-50">
        <button @click="showMenu = true" class="w-10 h-10 -ml-2 flex items-center justify-center text-stone-600 text-lg hover:bg-stone-100 rounded-full transition-colors">
            <i class="fas fa-bars"></i>
        </button>
        <div class="w-10 h-10 rounded-full overflow-hidden border border-stone-200 shadow-sm shrink-0">
            <img v-if="!imgError" src="logo.jpg" alt="Logo" class="w-full h-full object-cover" @error="handleImgError">
            <svg v-else viewBox="0 0 100 100" class="w-full h-full bg-stone-100"><circle cx="50" cy="50" r="20" fill="#ddd"/></svg>
        </div>
        <div class="flex-1">
            <h1 class="text-lg font-bold tracking-tight text-stone-800">å‹›å‹›ä¸Šèœ</h1>
        </div>
        <button v-if="selected.length" @click="selected = []" class="text-xs font-bold text-stone-400 border border-stone-200 px-3 py-1 rounded-full hover:bg-stone-800 hover:text-white transition-colors">
            æ¸…é™¤ ({{ selected.length }})
        </button>
    </header>

    <nav class="sticky top-[72px] z-40 bg-[#fdfbf7]/95 backdrop-blur px-6 border-b border-stone-100/50">
        <div class="flex overflow-x-auto no-scrollbar pb-1">
            <button @click="currentTab = 'all'" :class="['tab-btn', currentTab === 'all' ? 'active' : '']">å…¨éƒ¨</button>
            <button @click="currentTab = 'main'" :class="['tab-btn', currentTab === 'main' ? 'active' : '']">åƒé£½ä¸»é£Ÿ</button>
            <button @click="currentTab = 'side'" :class="['tab-btn', currentTab === 'side' ? 'active' : '']">å®µå¤œä¸‹é…’</button>
            <button @click="currentTab = 'brunch'" :class="['tab-btn', currentTab === 'brunch' ? 'active' : '']">æ—©åˆé¤</button>
            <button @click="currentTab = 'teatime'" :class="['tab-btn', currentTab === 'teatime' ? 'active' : '']">åˆèŒ¶ç”œé»</button>
        </div>
    </nav>

    <main class="flex-1">
        <div class="mt-4 px-6 space-y-5">
            <div v-for="(list, group) in ingredientGroups" :key="group">
                <h3 class="text-xs font-bold text-stone-400 mb-2 uppercase tracking-widest flex items-center">
                    <i class="fas fa-carrot mr-1.5 opacity-50"></i> {{ group }}
                </h3>
                <div class="flex flex-wrap gap-1.5">
                    <button v-for="item in list" :key="item" @click="toggle(item)"
                        :class="['chip px-3 py-1.5 rounded-xl text-sm font-medium border border-stone-200 text-stone-600 bg-white', 
                                selected.includes(item) ? 'active' : 'hover:bg-stone-50']">
                        {{ item }}
                    </button>
                </div>
            </div>
            <div class="border-t border-stone-100 my-2"></div>
            <div>
                <h3 class="text-xs font-bold text-stone-400 mb-2 uppercase tracking-widest flex items-center">
                    <i class="fas fa-globe-asia mr-1.5 opacity-50"></i> æ–™ç†é¢¨æ ¼
                </h3>
                <div class="flex flex-wrap gap-1.5">
                    <button v-for="style in styles" :key="style" @click="toggle(style)"
                         :class="['chip px-3 py-1 rounded-full text-xs font-medium border border-stone-100 text-stone-500 bg-stone-50', 
                                selected.includes(style) ? 'active' : 'hover:bg-stone-100']">
                        #{{ style }}
                    </button>
                </div>
            </div>
        </div>

        <div class="mt-8 px-6 space-y-8">
            <div v-if="filteredRecipes.length > 0">
                <div v-for="recipe in filteredRecipes" :key="recipe.name" class="recipe-card animate-fade-up">
                    <div class="relative h-48 w-full">
                        <img :src="recipe.img" class="w-full h-full object-cover rounded-t-3xl">
                        <div class="absolute top-4 right-4 bg-white/90 backdrop-blur px-3 py-1 rounded-full text-xs font-bold text-stone-800 shadow-sm">
                            {{ recipe.time }}
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="flex gap-2 mb-3 flex-wrap">
                            <span v-for="tag in recipe.tags.filter(t => selected.includes(t) || styles.includes(t))" :key="tag" class="text-[10px] font-bold tracking-wider uppercase text-stone-400 border border-stone-200 px-2 py-0.5 rounded">{{ tag }}</span>
                        </div>
                        <h2 class="text-2xl font-bold text-stone-800 mb-4">{{ recipe.name }}</h2>
                        <div class="space-y-4">
                            <div>
                                <h4 class="text-xs font-bold text-stone-400 mb-2">é£Ÿæ</h4>
                                <p class="text-sm text-stone-600 leading-relaxed">
                                    <span v-for="(ing, i) in recipe.ingredients" :key="i">{{ ing.name }} {{ ing.qty }}<span v-if="i < recipe.ingredients.length-1">ã€</span></span>
                                </p>
                            </div>
                            <div :class="['gf-box p-4 mt-4 rounded-r-xl relative transition-colors duration-500', recipe.showSecret ? 'warm-mode' : '']">
                                <div class="flex items-center gap-2 mb-2">
                                    <i :class="['fas', recipe.showSecret ? 'fa-heart text-orange-500' : 'fa-comment-dots text-rose-500']"></i>
                                    <span class="text-xs font-bold opacity-70">{{ recipe.showSecret ? 'ä¾†è‡ªå®¶äººçš„çœŸå¿ƒè©±' : 'å¥³å‹çŠ€åˆ©é»è©•' }}</span>
                                </div>
                                <p class="text-sm font-medium italic leading-relaxed">â€œ{{ recipe.showSecret ? recipe.secretMsg : recipe.gf }}â€</p>
                                <div v-if="recipe.secretMsg && !recipe.showSecret" @click.stop="triggerSecret(recipe)" class="secret-heart" title="é»æˆ‘æœ‰é©šå–œ"><i class="fas fa-heart"></i></div>
                            </div>
                            <div class="chef-note">
                                <h4 class="text-xs font-bold text-stone-500 mb-3 flex items-center justify-between">
                                    <span><i class="fas fa-pen-nib mr-1.5"></i> å‹›å‹›çš„ä¸»å»šç­†è¨˜</span>
                                    <span class="text-[10px] bg-stone-200 px-2 py-0.5 rounded-full" v-if="recipe.savedNotes && recipe.savedNotes.length">{{ recipe.savedNotes.length }} å‰‡</span>
                                </h4>
                                <div v-if="recipe.savedNotes && recipe.savedNotes.length > 0" class="mb-4 space-y-3">
                                    <div v-for="(note, idx) in recipe.savedNotes" :key="idx" class="history-item">
                                        <div class="flex justify-between items-center mb-1">
                                            <div class="history-date">{{ note.date }}</div>
                                            <div class="delete-note" @click="deleteNote(recipe, idx)"><i class="fas fa-trash-alt"></i></div>
                                        </div>
                                        <p class="history-content">{{ note.text }}</p>
                                    </div>
                                </div>
                                <textarea v-model="recipe.userFeedback" rows="2" class="chef-input" placeholder="ç´€éŒ„å¿ƒå¾—..."></textarea>
                                <button @click="saveAndSend(recipe)" :disabled="recipe.isSending || !recipe.userFeedback" class="send-btn">{{ recipe.isSending ? 'å„²å­˜ä¸­...' : 'å„²å­˜ç­†è¨˜' }} <i class="fas fa-save ml-1"></i></button>
                                <div style="clear:both;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div v-else class="text-center py-20 opacity-40">
                <i class="fas fa-utensils text-4xl mb-4 text-stone-300"></i>
                <p class="text-sm text-stone-500">é‚„æ²’é¸åˆ°æƒ³åƒçš„å—ï¼Ÿ</p>
                <p class="text-xs text-stone-400 mt-2">è©¦è©¦é»æ“Šä¸Šæ–¹çš„é£Ÿææˆ–é¢¨æ ¼æŒ‰éˆ•</p>
            </div>
        </div>
    </main>

    <footer class="bg-[#fdfbf7] text-stone-500 py-12 px-6 mt-12 border-t border-stone-200">
        <div class="grid grid-cols-2 gap-8 mb-8">
            <div v-for="(links, category) in menuItems" :key="category">
                <h4 class="text-stone-800 text-sm font-bold mb-4">{{ category }}</h4>
                <ul class="space-y-2">
                    <li v-for="link in links" :key="link" @click="handleMenuClick(link)" class="footer-link">{{ link }}</li>
                </ul>
            </div>
        </div>
        <div class="border-t border-stone-200 pt-8 text-center text-xs text-stone-400">
            <p>&copy; 2025 HsunHsun Cooking. All rights reserved.</p>
        </div>
    </footer>
</div>

<script src="data.js"></script>

<script>
const { createApp, ref, computed, onMounted } = Vue;

createApp({
    setup() {
        const selected = ref([]);
        const currentTab = ref('all');
        const imgError = ref(false);
        const handleImgError = () => { imgError.value = true; };
        const recipes = ref(typeof allRecipes !== 'undefined' ? allRecipes : []);

        // --- é¸å–®è³‡æ–™ ---
        const showMenu = ref(false);
        const menuItems = {
            'é—œæ–¼': ['ç¶²ç«™ä»‹ç´¹', 'é—œæ–¼å‹›å‹›ä¸Šèœ', 'åŠ å…¥æˆ‘å€‘', 'å»£å‘Šåˆä½œ'],
            'å“ç‰Œè³‡ç”¢': ['éš±ç§æ¬Šèˆ‡æ¢æ¬¾'],
            'æœƒå“¡æœå‹™': ['å¸¸è¦‹å•é¡Œ', 'å¿˜è¨˜å¯†ç¢¼', 'å¸³è™Ÿè¨­å®š', 'å€‹äººé é¢', 'é£Ÿè­œæ”¶è—']
        };

        // --- é–±è®€å½ˆçª—è¨­å®š ---
        const showInfoModal = ref(false);
        const infoModalContent = ref('');

        // ğŸ”¥ æ–‡æ¡ˆå…§å®¹è¨­å®š ğŸ”¥
        const contentData = {
            'é—œæ–¼å‹›å‹›ä¸Šèœ': `
                <h2>å‹›å‹›ä¸Šèœï½œå¼µæ™¯å‹›å»ºç¯‰å¸«çš„ç§æˆ¿éˆæ„Ÿé£Ÿè­œ</h2>
                <div class="info-quote">ã€Œå¸ä¸‹å»ºç¯‰åœ–ç´™ï¼Œåœ¨å»šæˆ¿è£¡å‹¾å‹’å®¶çš„æº«åº¦ã€‚ã€</div>
                <h3>â–é—œæ–¼é€™å€‹ç¶²ç«™ï¼šå¾è—åœ–åˆ°é¤ç›¤çš„ç™‚ç™’è½‰èº«</h3>
                <p>å°æ–¼å¼µæ™¯å‹›å»ºç¯‰å¸«ä¾†èªªï¼Œç™½å¤©æ˜¯åœ¨ç·šæ¢èˆ‡çµæ§‹ä¸­æ§‹ç¯‰åŸå¸‚çš„é¢¨æ™¯ï¼›è€Œå¤œæ™šï¼Œå‰‡æ˜¯èµ°é€²å»šæˆ¿ï¼Œåœ¨é‹ç¢—ç“¢ç›†é–“å°‹æ‰¾ç”Ÿæ´»çš„ç¯€å¥ã€‚</p>
                <p>ã€Œå‹›å‹›ä¸Šèœã€ æ˜¯å°ˆç‚ºå¼µå»ºç¯‰å¸«é‡èº«æ‰“é€ çš„å€‹äººå°ˆå±¬é£Ÿè­œç©ºé–“ã€‚æˆ‘å€‘æ·±çŸ¥å»ºç¯‰å¸«çš„å·¥ä½œå……æ»¿æŒ‘æˆ°èˆ‡é«˜å£“ï¼Œå› æ­¤é€™å€‹ç¶²ç«™ä¸åªæ˜¯é£Ÿè­œçš„å †ç–Šï¼Œæ›´æ˜¯ä¸€å€‹ã€Œæ±ºç­–æ¸›å£“ã€çš„è£œçµ¦ç«™ã€‚</p>
                <p>è®“æ‚¨åœ¨çµæŸå¿™ç¢Œçš„è¨­è¨ˆå·¥ä½œå¾Œï¼Œä¸å¿…å†ç‚ºã€Œæ™šé¤åƒä»€éº¼ã€è€Œç…©æƒ±ï¼Œåªéœ€è¼•è¼•ä¸€é»ï¼Œå°±èƒ½æ‰¾åˆ°å°ˆå±¬æ–¼æ‚¨çš„ç¾å‘³éˆæ„Ÿã€‚</p>
            `,
            'ç¶²ç«™ä»‹ç´¹': `
                <h2>ç¶²ç«™ç‰¹è‰²èˆ‡åŠŸèƒ½å°è¦½</h2>
                <h3>â–ç¶²ç«™ç‰¹è‰²äº®é»</h3>
                <ul class="info-list">
                    <li><strong>âœï¸ å°ˆå±¬å»ºç¯‰å¸«çš„ã€Œæ–™ç†å‚™è¨»æ¬„ã€</strong><br>æ¯ä¸€é“æ–™ç†éƒ½æ˜¯ä¸€æ¬¡å¯¦é©—ã€‚ç¶²ç«™ç‰¹åˆ¥è¨­è¨ˆäº†éš¨æ‰‹ç­†è¨˜åŠŸèƒ½ï¼Œè®“æ‚¨å¯ä»¥åƒæ¨™è¨»è¨­è¨ˆåœ–ä¸€æ¨£ï¼Œç´€éŒ„ä¸‹ç•¶æ¬¡çš„ç«å€™èª¿æ•´ã€èª¿å‘³æ¯”ä¾‹ï¼Œæ‰“é€ å‡ºä¸æ–·é€²åŒ–çš„ã€Œå‹³å¼é¢¨å‘³ã€ã€‚</li>
                    <li><strong>ğŸ’¡ å¿«é€Ÿæ±ºç­–ï¼Œæ•ˆç‡ä¸‹å»š</strong><br>é‡å°å»ºç¯‰å¸«é«˜æ•ˆçš„ç”Ÿæ´»æ­¥èª¿ï¼Œé£Ÿè­œåˆ†é¡æ¸…çˆ½ç›´è§€ã€‚ç„¡è«–æ˜¯ã€Œ15åˆ†é˜å¿«é€Ÿå‡ºèœã€é‚„æ˜¯ã€Œé€±æœ«æ…¢ç‡‰æ–™ç†ã€ï¼Œéƒ½èƒ½è®“æ‚¨å¿«é€Ÿé¸å®šç›®æ¨™ã€‚</li>
                    <li><strong>ğŸ¨ è·äººè·¨ç•Œå°è©±</strong><br>é€™æ˜¯ä¸€å€‹æœƒã€Œæˆé•·ã€çš„ç¶²é ã€‚é€éå…§å»ºçš„å›é¥‹æ©Ÿåˆ¶ï¼Œæ‚¨çš„æ¯ä¸€æ¢ä½¿ç”¨å»ºè­°éƒ½èƒ½ç›´é”ç¶²é è¨­è¨ˆå¸«ï¼Œè®“æ•¸ä½ç©ºé–“è¶Šä¾†è¶Šè²¼åˆæ‚¨çš„ç¿’æ…£ã€‚</li>
                </ul>
                <div class="info-quote">ã€Œå»ºç¯‰æ˜¯ç‚ºäº†å®‰ç½®èº«é«”ï¼Œè€Œæ–™ç†æ˜¯ç‚ºäº†å®‰æ”¾éˆé­‚ã€‚ã€</div>
                <h3>â–å¯«çµ¦æ™¯å‹›å»ºç¯‰å¸«çš„ä¸€æ®µè©±</h3>
                <p>è¾›è‹¦äº†ï¼Œå¼µå»ºç¯‰å¸«ã€‚ç•¶æ‚¨æ¨é–‹å®¶é–€ï¼Œæ›ä¸‹æ­£è£ï¼Œé€™è£¡å°±æ˜¯æ‚¨çš„å‰µæ„å¯¦é©—å®¤ã€‚é¡˜é€™å€‹ç¶²é èƒ½é™ªä¼´æ‚¨ï¼Œåœ¨ç†±æ°£é¨°é¨°çš„é£¯èœé¦™ä¸­ï¼Œæ‰¾å›æœ€ç´”ç²¹çš„å¿«æ¨‚èˆ‡æ»¿è¶³ã€‚</p>
            `,
            'éš±ç§æ¬Šèˆ‡æ¢æ¬¾': `
                <h2>éš±ç§æ¬Šèˆ‡æ¢æ¬¾ (å¼µæ™¯å‹›å»ºç¯‰å¸«å°ˆå±¬)</h2>
                <div class="terms-section">
                    <h3><span class="terms-num">1.</span> èªçŸ¥èˆ‡æ¥å—æ¢æ¬¾</h3>
                    <p>å‹›å‹›ä¸Šèœæä¾›ã€Œå¼µæ™¯å‹›å»ºç¯‰å¸«ã€å°ˆå±¬é£Ÿè­œæœå‹™ã€‚ç•¶æ‚¨é–‹å§‹ç€è¦½é£Ÿè­œæˆ–ç´€éŒ„å¿ƒå¾—æ™‚ï¼Œå³è¡¨ç¤ºæ‚¨å·²é–±è®€ä¸¦åŒæ„æ¥å—é€™ä»½å……æ»¿æ„›çš„æ¢æ¬¾ã€‚å‹›å‹›ä¸Šèœæœ‰æ¬Šéš¨æ™‚ä¿®æ”¹æ¢æ¬¾ï¼Œè‹¥æ‚¨ç¹¼çºŒç…®é£¯ï¼Œè¦–ç‚ºæ‚¨é¡˜æ„ç¹¼çºŒéµå®ˆï¼ˆä¸¦åŠ ç¢¼å¯µæ„›å¥³å‹ï¼‰ã€‚</p>
                </div>
                <div class="terms-section">
                    <h3><span class="terms-num">2.</span> æ‚¨çš„è¨»å†Šèˆ‡æº–æ™‚é–‹é£¯ç¾©å‹™</h3>
                    <ul class="info-list">
                        <li>æä¾›æ­£ç¢ºçš„é£Ÿæè³¼è²·æ¸…å–®èˆ‡ä¸‹ç­æ™‚é–“ã€‚</li>
                        <li>è‹¥å› åŠ ç­å°è‡´é–‹é£¯æ™‚é–“ä¸æ­£ç¢ºï¼Œé›–ä¸çµ‚æ­¢å¸³è™Ÿï¼Œä½†æ‚¨é ˆç„¡å„Ÿå¹«å¥³å‹æŒ‰æ‘© 30 åˆ†é˜ä½œç‚ºè£œå„Ÿã€‚</li>
                    </ul>
                </div>
                <div class="terms-section">
                    <h3><span class="terms-num">3.</span> æœƒå“¡å¸³è™Ÿã€å¯†ç¢¼åŠå±…å®¶å®‰å…¨</h3>
                    <p>æ‚¨æœ‰è²¬ä»»ç¶­æŒæ‚¨çš„å»ºç¯‰å¸«å°ˆæ¥­å½¢è±¡åŠå»šæˆ¿å®‰å…¨ã€‚è‹¥ç™¼ç”Ÿã€Œå»šæˆ¿å¤±ç«ã€è«‹ç«‹å³é€šçŸ¥ç¶²é è¨­è¨ˆå¸«ã€‚æ¯æ¬¡ç…®é£¯å®Œç•¢è«‹æ¸…ç†æµç†å°ï¼Œè‹¥æœªå®Œæˆéœ€ç¹³äº¤å¥³å‹ä¿è­·è²» 300 å…ƒã€‚</p>
                </div>
                <div class="terms-section">
                    <h3><span class="terms-num">4.</span> ä½¿ç”¨è€…çš„å®ˆæ³•ç¾©å‹™èˆ‡ã€Œæ„›çš„æ‰¿è«¾ã€</h3>
                    <ul class="info-list">
                        <li>ä¸å¾—åœ¨å‚™è¨»æ¬„å¼µè²¼ã€Œå«Œæ£„å¥³å‹å»šè—ã€æˆ–ã€Œä¸æƒ³æ´—ç¢—ã€ç­‰å…·æ”»æ“Šæ€§æ–‡å­—ï¼Œé•åè€…ç½°å¹«å¥³å‹æŒ‰æ‘© 30 åˆ†é˜ã€‚</li>
                        <li>å¿…é ˆè¦ªè‡ªä¸‹å»šï¼Œè‹¥ç™¼ç¾å«å¤–é€å»å½è£æˆè‡ªç…®ï¼Œæ‡‰ç«‹å³çµ¦äºˆå¥³å‹ä¿è­·è²» 300 å…ƒã€‚</li>
                    </ul>
                </div>
                <div class="terms-section">
                    <h3><span class="terms-num">5.</span> è³‡è¨Šæˆ–å»ºè­°ï¼šå»ºç¯‰å¸«çš„å°ˆæ¥­å …æŒ</h3>
                    <p>è‹¥å› ä¾ç…§é£Ÿè­œç…®å‡ºå¤ªé¹¹çš„èœè‰²ï¼Œæœ¬ç«™ä¸è² è³ å„Ÿè²¬ä»»ï¼Œä½†æ‚¨æ‡‰ä¸»å‹•æä¾›å¥³å‹ 30 åˆ†é˜æŒ‰æ‘©æœå‹™ä»¥è½‰ç§»å…¶å‘³è¦ºæ³¨æ„ã€‚</p>
                </div>
                <div class="terms-section">
                    <h3><span class="terms-num">6.</span> æ™ºæ…§è²¡ç”¢æ¬Šçš„ä¿è­·</h3>
                    <p>ç¶²ç«™è¨­è¨ˆã€åœ–ç‰‡åŠå¼µå»ºç¯‰å¸«ç´€éŒ„çš„å¿ƒå¾—å—ã€Œæ„›çš„æ™ºæ…§è²¡ç”¢æ¬Šã€ä¿è­·ã€‚è‹¥æ¬²å¤–å‚³çµ¦å…¶ä»–åŒåƒšï¼Œé ˆå–å¾—ç¶²é è¨­è¨ˆå¸«äº‹å‰æ›¸é¢åŒæ„ï¼Œå¦å‰‡ç½°ç¹³ä¿è­·è²» 300 å…ƒä½œç‚ºç´„æœƒåŸºé‡‘ã€‚</p>
                </div>
                <div class="terms-section">
                    <h3><span class="terms-num">7.</span> æ‚¨å°ã€Œå‹›å‹›ä¸Šèœã€ä¹‹æˆæ¬Š</h3>
                    <p>æ‚¨åŒæ„æˆæ¬Šè¨­è¨ˆå¸«ä½¿ç”¨æ‚¨çš„ç§æˆ¿å¿ƒå¾—é€²è¡Œå„ªåŒ–ï¼ˆä¾‹å¦‚ï¼šåœ¨ç¶²é ä¸Šæ”¾æ›´å¤šé–ƒç…§ï¼‰ã€‚æ‚¨ä¸å¾—ä¸»å¼µè³ å„Ÿï¼Œä½†å¯ç”³è«‹æŒ‰æ‘©æœå‹™ä¸€æ¬¡ã€‚</p>
                </div>
                <div class="terms-section">
                    <h3><span class="terms-num">8.</span> æœå‹™çµ‚æ­¢èˆ‡æ„›çš„å»¶çºŒ</h3>
                    <p>è‹¥ä¸€å®šæœŸé–“æœªä½¿ç”¨æœå‹™ï¼ˆä¾‹å¦‚ï¼šé€£ä¸‰å¤©æ²’å›å®¶åƒé£¯ï¼‰ï¼Œæœ¬ç«™å¾—çµ‚æ­¢æ¬Šé™ã€‚æ¬²æ¢å¾©æ¬Šé™ï¼Œéœ€åŸ·è¡Œã€Œç„¡å„ŸæŒ‰æ‘© 30 åˆ†é˜ã€èˆ‡ã€Œä¿è­·è²» 300 å…ƒã€ä¹‹å¥—è£æ–¹æ¡ˆã€‚</p>
                </div>
                <div class="terms-section">
                    <h3><span class="terms-num">9.</span> ä¸€èˆ¬æ¢æ¬¾</h3>
                    <p>æœ¬æœå‹™æ¢æ¬¾ä¹‹è§£é‡‹èˆ‡é©ç”¨ï¼Œæ‡‰ä»¥<strong>ã€Œå¥³å‹æ°¸é æ˜¯å°çš„ã€</strong>ç‚ºæœ€é«˜æŒ‡å°åŸå‰‡ï¼Œä¸¦ä»¥ã€Œæ—‹è½‰èŠ±å¸‚ã€ç‚ºç¬¬ä¸€å¯©ç®¡è½„æ³•é™¢ã€‚</p>
                </div>
            `
        };

        const handleMenuClick = (item) => {
            showMenu.value = false;
            if (contentData[item]) {
                infoModalContent.value = contentData[item];
                showInfoModal.value = true;
            } else if (item === 'åŠ å…¥æˆ‘å€‘') {
                alert('æˆ‘å€‘ç›®å‰åªæœ‰ä¸€ä½ä¸»å»š(å‹›å‹›)å’Œä¸€ä½è©¦åƒå“¡(å¦³)ï¼Œå·²ç¶“é¡æ»¿å›‰ï¼â¤ï¸');
            } else {
                alert(`ã€Œ${item}ã€é é¢å»ºç½®ä¸­ï¼Œæ•¬è«‹æœŸå¾…ï¼`);
            }
        };

        // --- ç™»å…¥è¨­å®š ---
        const showLoginModal = ref(false);
        const inputUser = ref('');
        const inputPwd = ref('');
        const loginError = ref(false);
        const isShake = ref(false);
        const CORRECT_USER = 'shyun';
        const CORRECT_PWD = 'love1314';

        // --- EmailJS ---
        const EMAIL_SERVICE_ID = 'service_voqowbk';   
        const EMAIL_TEMPLATE_ID = 'template_d6l7uav'; 
        const EMAIL_PUBLIC_KEY = 'OYM1raInOn1sEW7FG';   

        onMounted(() => {
            if (EMAIL_PUBLIC_KEY) emailjs.init(EMAIL_PUBLIC_KEY);
            loadNotesFromStorage();
            const hasAuth = localStorage.getItem('shyun_auth_pass');
            if (!hasAuth) {
                setTimeout(() => { showLoginModal.value = true; }, 5000);
            }
        });

        const checkLogin = () => {
            if (inputUser.value === CORRECT_USER && inputPwd.value === CORRECT_PWD) {
                showLoginModal.value = false;
                localStorage.setItem('shyun_auth_pass', 'true');
            } else {
                loginError.value = true;
                isShake.value = true;
                setTimeout(() => { isShake.value = false; }, 500);
                inputPwd.value = '';
            }
        };

        const loadNotesFromStorage = () => {
            const savedData = localStorage.getItem('shyun_cook_notes');
            if (savedData) {
                const notesMap = JSON.parse(savedData);
                recipes.value.forEach(r => {
                    if (notesMap[r.name]) r.savedNotes = notesMap[r.name];
                    else r.savedNotes = [];
                });
            }
        };

        const saveToStorage = () => {
            const notesMap = {};
            recipes.value.forEach(r => {
                if (r.savedNotes && r.savedNotes.length > 0) notesMap[r.name] = r.savedNotes;
            });
            localStorage.setItem('shyun_cook_notes', JSON.stringify(notesMap));
        };

        const saveAndSend = (recipe) => {
            if (!recipe.userFeedback) return;
            recipe.isSending = true;
            const today = new Date().toLocaleDateString();
            if (!recipe.savedNotes) recipe.savedNotes = [];
            recipe.savedNotes.unshift({ date: today, text: recipe.userFeedback });
            saveToStorage();
            const templateParams = { recipe_name: recipe.name, message: recipe.userFeedback };
            emailjs.send(EMAIL_SERVICE_ID, EMAIL_TEMPLATE_ID, templateParams)
                .then(() => {}, (err) => console.error(err))
                .finally(() => {
                    recipe.userFeedback = ''; 
                    recipe.isSending = false;
                    alert('âœ… ç­†è¨˜å·²å„²å­˜ï¼');
                });
        };

        const deleteNote = (recipe, idx) => {
            if (confirm('ç¢ºå®šåˆªé™¤ï¼Ÿ')) {
                recipe.savedNotes.splice(idx, 1);
                saveToStorage();
            }
        };

        const ingredientGroups = {
            'ğŸ¥© è‚‰é¡ (è±¬/é›)': ['äº”èŠ±è‚‰', 'æ’éª¨', 'è±¬è‚‰ç‰‡', 'é›è…¿æ’', 'å…¨é›', 'é¹½æ°´é›'],
            'ğŸŸ æµ·é®®': ['é±¸é­š', 'å°ç£é¯›', 'è™±ç›®é­š', 'è›¤èœŠ', 'é®®èšµ', 'è¦å­'],
            'ğŸ¥¦ é’èœç“œæœ': ['é’æ±Ÿèœ', 'ç©ºå¿ƒèœ', 'Aèœ', 'åœ°ç“œè‘‰', 'çµ²ç“œ', 'è‹¦ç“œ', 'å°é»ƒç“œ', 'å†¬ç“œ'],
            'ğŸ“¦ ä¹¾è²¨åŠ å·¥': ['è±†çš®', 'æ²¹è±†è…', 'è…çš®', 'é¦™è‡', 'å°é­šå¹²', 'é­šä¸¸']
        };
        const styles = ['å°å¼', 'æ—¥å¼', 'éŸ“å¼', 'ç¾©å¼', 'æ³°å¼', 'ç¾å¼', 'æ—©åˆé¤', 'ç”œé»', 'å®¶å¸¸ç†±ç‚’', 'å¤æ—©å‘³æ»·è‚‰', 'å¤œå¸‚å°åƒ'];
        const toggle = (i) => {
            const idx = selected.value.indexOf(i);
            if (idx > -1) selected.value.splice(idx, 1);
            else selected.value.push(i);
        };
        const filteredRecipes = computed(() => {
            let results = recipes.value;
            if (selected.value.length > 0) results = results.filter(r => r.tags.some(t => selected.value.includes(t)));
            if (currentTab.value !== 'all') results = results.filter(r => r.type === currentTab.value);
            return results;
        });
        const triggerSecret = (recipe) => { recipe.showSecret = true; };

        return { selected, ingredientGroups, styles, recipes, toggle, filteredRecipes, currentTab, imgError, handleImgError, triggerSecret, saveAndSend, deleteNote, showLoginModal, inputUser, inputPwd, loginError, checkLogin, isShake, showMenu, menuItems, handleMenuClick, showInfoModal, infoModalContent };
    }
}).mount('#app');
</script>

</body>
</html>